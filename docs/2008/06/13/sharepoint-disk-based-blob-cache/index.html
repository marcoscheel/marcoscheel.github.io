<!doctype html><html lang=de><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=HandheldFriendly content="True"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><meta name=generator content="Hugo 0.128.1"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>SharePoint Disk Based Blob Cache - Marco Scheel aka GeekDotNet</title>
<meta name=author content="marcoscheel"><meta name=description content="Marco Scheel. Microsoft 365 Modern Collaboration. Podcast Co-Host of Hairless in the Cloud"><meta name=keywords content="xArchived"><meta property="og:title" content="SharePoint Disk Based Blob Cache"><meta name=twitter:title content="SharePoint Disk Based Blob Cache"><meta property="og:type" content="article"><meta property="og:url" content="https://marcoscheel.de/2008/06/13/sharepoint-disk-based-blob-cache/"><meta property="og:description" content="Wir implementieren gerade eine SiteCollection in einem Portal in dem es darum geht Video&rsquo;s die aus einer Document Library kommen in einem Flash Movie darzustellen. Um die Performance und die Wartbarkeit zu halten haben wir folgende Dinge eingerichtet:
Eigene ContentDB Wir haben die SiteCollection uber STSADM angelegt und einer leeren ContentDB auf dem SQL Server zugewiesen. Anschließend haben wir die ContentDB im Central Admin &ldquo;Offline&rdquo; genommen, so das die Datenbank nur fur Video Content genutzt wird. Fur den Backup Prozess kann man so einen anderen Schedule hinterlegen, da hier nicht so viel &ldquo;Bewegung&rdquo; existiert und es primar um grosse Dateien geht."><meta name=twitter:description content="Wir implementieren gerade eine SiteCollection in einem Portal in dem es darum geht Video&rsquo;s die aus einer Document Library kommen in einem Flash Movie darzustellen. Um die Performance und die Wartbarkeit zu halten haben wir folgende Dinge eingerichtet:
Eigene ContentDB Wir haben die SiteCollection uber STSADM angelegt und einer leeren ContentDB auf dem SQL Server zugewiesen. Anschließend haben wir die ContentDB im Central Admin &ldquo;Offline&rdquo; genommen, so das die Datenbank nur fur Video Content genutzt wird. Fur den Backup Prozess kann man so einen anderen Schedule hinterlegen, da hier nicht so viel &ldquo;Bewegung&rdquo; existiert und es primar um grosse Dateien geht."><meta property="og:image" content="https://marcoscheel.de/og.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://marcoscheel.de/og.png"><meta property="article:published_time" content="2008-06-13T09:40:00+00:00"><meta property="article:modified_time" content="2008-06-13T09:40:00+00:00"><style>@media(prefers-color-scheme:dark){body[data-theme=auto] img{filter:brightness(60%)}}body[data-theme=dark] img{filter:brightness(60%)}</style><link rel=stylesheet href=https://marcoscheel.de/assets/css/fuji.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-MJ772EN3ZY"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MJ772EN3ZY")}</script><link rel=stylesheet href=/css/custom.css></head><body data-theme=auto data-theme-auto=false><script data-cfasync=false>var fujiThemeData=localStorage.getItem("fuji_data-theme");fujiThemeData?fujiThemeData!=="auto"&&document.body.setAttribute("data-theme",fujiThemeData==="dark"?"dark":"light"):localStorage.setItem("fuji_data-theme","auto")</script><header><div class="container-lg clearfix"><div class="col-12 header"><h1><a class=title-main href=https://marcoscheel.de/>Marco Scheel aka GeekDotNet</a></h1><span class=title-sub>Früher SharePoint. Heute Microsoft 365 Modern Collaboration. Co-Host of Hairless in the cloud.</span></div></div></header><main><div class="container-lg clearfix"><div class="col-12 col-md-9 float-left content"><article><h2 class="post-item post-title"><a href=https://marcoscheel.de/2008/06/13/sharepoint-disk-based-blob-cache/>SharePoint Disk Based Blob Cache</a></h2><div class="post-item post-meta"><span><i class="iconfont icon-today-sharp"></i>&nbsp;2008-06-13</span>
<span><i class="iconfont icon-file-tray-sharp"></i>&nbsp;424 Wörter</span>
<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href=/tags/xarchived>xArchived</a>&nbsp;</span></div><div class="post-content markdown-body"><p>Wir implementieren gerade eine SiteCollection in einem Portal in dem es darum geht Video&rsquo;s die aus einer Document Library kommen in einem Flash Movie darzustellen. Um die Performance und die Wartbarkeit zu halten haben wir folgende Dinge eingerichtet:</p><ol><li><strong>Eigene ContentDB</strong></li></ol><p>Wir haben die SiteCollection uber STSADM angelegt und einer leeren ContentDB auf dem SQL Server zugewiesen. Anschließend haben wir die ContentDB im Central Admin &ldquo;Offline&rdquo; genommen, so das die Datenbank nur fur Video Content genutzt wird. Fur den Backup Prozess kann man so einen anderen Schedule hinterlegen, da hier nicht so viel &ldquo;Bewegung&rdquo; existiert und es primar um grosse Dateien geht.
2. <strong>Upload Limit erhohen</strong></p><p>Die Konfiguration wird Leider fur die gesamte WebApplication vorgenommen. Sollte es also notig sein, dass nur die neue SiteCollection von dem Limit beroffen ist, dann wurde eine eigene Application benotigt, was den Aufwand naturlich deutlich erhoht.</p><p><a href=http://cloudfront.gkdatacenter.net/marco/WindowsLiveWriter/SharePointDiskBasedBlobCache_D0B6/image_2.png target=_blank><img class=img-zoomable src=http://cloudfront.gkdatacenter.net/marco/WindowsLiveWriter/SharePointDiskBasedBlobCache_D0B6/image_thumb.png alt=image>
</a>3. <strong>Disk Based Blob Cache einschalten</strong></p><p>Hier ist der Artikel von MS:</p><p>MSDN: <a href=http://msdn.microsoft.com/en-us/library/aa604896.aspx target=_blank>Disk-based Caching for Binary Large Objects</a></p><p>Technet: <a href=http://technet.microsoft.com/en-us/library/cc298466%28TechNet.10%29.aspx#BLOB_caching target=_blank>Caching in Office SharePoint Server 2007</a></p><p>EMC Team Blog: <a href=http://blogs.msdn.com/ecm/archive/2006/11/08/how-to-make-your-moss-2007-web-site-faster-with-caching.aspx target=_blank>How can I make my web site faster with caching?</a></p><p>So sieht unsere Web.Config dann auf den beiden WFE Servern aus:</p><p>&lt;BlobCache</p><p>location=&ldquo;D:MOSS-BlobCache&rdquo;</p><p>path=".(flv)$"</p><p>maxSize=&ldquo;1&rdquo;</p><p>max-age=&ldquo;86400&rdquo;</p><p>enabled=&ldquo;True&rdquo; /></p><p>Im Moment werden also nur Flash Videos fur 24 Stunden mit einer gesamt Cachegroße von 1 GB gecached.</p><p>Das erzielte Ergebnis hilft zum einen die Datenbank zu entlasten, sendet allerdings auch gleich an den Client per HTTP-Header die folgenden Cache Control einstellungen:</p><p>Cache-Control: public, max-age=86400</p><p>Somit wurde auch der Client erst in 24 Stunden nach einem neuen File fragen. Die Konsequenz ist also das egal, ob ich den Cache leere oder den Content auf dem Server austausche, der Client wurde bei korrekter einstllung erst in 24 Stunden nach einem neuen File fragen. Ich hatte schon Situationen, wo so etwas zu Problemen gefuhrt hat. Eventuell setzen wir den Cache auf 15 Minuten, was die Server bei vielen gleichzeitigen Zugriffen noch immer deutlich unterstutzt, aber bei einem fehlerhaften File (Video) den notigen Spielraum fur ein kurzfristiges Update schafft.</p><p>Sollte man in die verlegenheit kommen den Cache fruher wieder los werden zu wollen, dann gibt es diese folgende potentielle Moglichkeiten:</p><ol><li>**STSADM</li></ol><p>**stsadm -o setproperty -propertyname blobcacheflushcount -propertyvalue 11 -url http://mywebapp:port
2. <strong>SiteSettings - <strong>Site Collection Administration</strong> - <strong>Site collection object cache</strong></strong></p><p><a href=http://cloudfront.gkdatacenter.net/marco/WindowsLiveWriter/SharePointDiskBasedBlobCache_D0B6/image4.png target=_blank><img class=img-zoomable src=http://cloudfront.gkdatacenter.net/marco/WindowsLiveWriter/SharePointDiskBasedBlobCache_D0B6/image4_thumb.png alt=image></a></p><p><em>Achtung</em>: Diese Aktion muss fur jeden Zone auf der eine Applikation &ldquo;Extended&rdquo; wurde durchgefuhrt werden. Sollte zum Beispiel also noch ein HTTPS Site mit laufen, mußte das auch dort gemacht werden.
3. <strong>del <em>.</em></strong></p><p>Einfach aud den WFE Servern den Verzeichnisinhalt loschen und ein IISRESET durchfuhren</p><p>Ciao Marco</p></div></article><div class="license markdown-body"><blockquote><p>Falls nicht anders angegeben, ist der Inhalt dieser Seite lizensiert unter <a rel=license href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC BY 4.0</a>.</p></blockquote></div><div class=post-comment data-comment=disqus><span class=post-comment-notloaded><i class="iconfont icon-chatbox-ellipses-sharp"></i>&nbsp;Lade Kommentare</span><div id=disqus_thread style=display:none></div><script>function loadComment(){var t=document.querySelector(".post-comment"),n=function(){this.page.url="https://marcoscheel.de/2008/06/13/sharepoint-disk-based-blob-cache/",this.page.identifier="2008-06-13-sharepoint-disk-based-blob-cache"},e=document.createElement("script");e.src="https://marcoscheel.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),document.querySelector("#disqus_thread").removeAttribute("style"),(document.body||document.head).appendChild(e),document.querySelector("span.post-comment-notloaded").setAttribute("style","display: none;")}</script></div></div><aside class="col-12 col-md-3 float-left sidebar"><div class="sidebar-item sidebar-pages"><sidebarh3>Seiten</sidebarh3><ul><li><a href=/>Home</a></li><li><a href=/archives/>Archives</a></li><li><a href=/about/>About</a></li><li><a href=/search/>Search</a></li><li><a href=/impressum/>Impressum</a></li><li><a href=http://feeds.marcoscheel.de/marcoscheel>RSS</a></li></ul></div><div class="sidebar-item sidebar-links"><sidebarh3>Links</sidebarh3><ul><li><a href=https://github.com/marcoscheel target=_blank><span>GitHub</span></a></li><li><a href=https://twitter.com/marcoscheel target=_blank><span>Twitter</span></a></li><li><a href=https://www.linkedin.com/in/marcoscheel target=_blank><span>LinkedIn</span></a></li><li><a href=https://hairlessinthecloud.com target=_blank><span>Hairless in the cloud</span></a></li></ul></div><div class="sidebar-item sidebar-tags"><sidebarh3>Tags</sidebarh3><div><span><a href=/tags/azure-ad/>Azure AD</a>
</span><span><a href=/tags/development/>Development</a>
</span><span><a href=/tags/equipment/>Equipment</a>
</span><span><a href=/tags/groups/>Groups</a>
</span><span><a href=/tags/meta/>Meta</a>
</span><span><a href=/tags/microsoft-365/>Microsoft 365</a>
</span><span><a href=/tags/microsoft-graph/>Microsoft Graph</a>
</span><span><a href=/tags/microsoft-teams/>Microsoft Teams</a>
</span><span><a href=/tags/mip/>MIP</a>
</span><span><a href=/tags/office365/>Office365</a>
</span><span><a href=/tags/sharepoint/>SharePoint</a>
</span><span><a href=/tags/tools/>Tools</a>
</span><span><a href=/tags/work/>Work</a>
</span><span><a href=/tags/xarchived/>XArchived</a></span></div></div><div class="sidebar-item sidebar-toc"><sidebarh3>Inhalt</sidebarh3><nav id=TableOfContents></nav></div></aside></div><div class=btn><div class=btn-menu id=btn-menu><i class="iconfont icon-grid-sharp"></i></div><div class=btn-toggle-mode><i class="iconfont icon-contrast-sharp"></i></div><div class=btn-scroll-top><i class="iconfont icon-chevron-up-circle-sharp"></i></div></div><aside class=sidebar-mobile style=display:none><div class=sidebar-wrapper><div class="sidebar-item sidebar-pages"><sidebarh3>Seiten</sidebarh3><ul><li><a href=/>Home</a></li><li><a href=/archives/>Archives</a></li><li><a href=/about/>About</a></li><li><a href=/search/>Search</a></li><li><a href=/impressum/>Impressum</a></li><li><a href=http://feeds.marcoscheel.de/marcoscheel>RSS</a></li></ul></div><div class="sidebar-item sidebar-links"><sidebarh3>Links</sidebarh3><ul><li><a href=https://github.com/marcoscheel target=_blank><span>GitHub</span></a></li><li><a href=https://twitter.com/marcoscheel target=_blank><span>Twitter</span></a></li><li><a href=https://www.linkedin.com/in/marcoscheel target=_blank><span>LinkedIn</span></a></li><li><a href=https://hairlessinthecloud.com target=_blank><span>Hairless in the cloud</span></a></li></ul></div><div class="sidebar-item sidebar-tags"><sidebarh3>Tags</sidebarh3><div><span><a href=/tags/azure-ad/>Azure AD</a>
</span><span><a href=/tags/development/>Development</a>
</span><span><a href=/tags/equipment/>Equipment</a>
</span><span><a href=/tags/groups/>Groups</a>
</span><span><a href=/tags/meta/>Meta</a>
</span><span><a href=/tags/microsoft-365/>Microsoft 365</a>
</span><span><a href=/tags/microsoft-graph/>Microsoft Graph</a>
</span><span><a href=/tags/microsoft-teams/>Microsoft Teams</a>
</span><span><a href=/tags/mip/>MIP</a>
</span><span><a href=/tags/office365/>Office365</a>
</span><span><a href=/tags/sharepoint/>SharePoint</a>
</span><span><a href=/tags/tools/>Tools</a>
</span><span><a href=/tags/work/>Work</a>
</span><span><a href=/tags/xarchived/>XArchived</a></span></div></div><div class="sidebar-item sidebar-toc"><sidebarh3>Inhalt</sidebarh3><nav id=TableOfContents></nav></div></div></aside></main><footer><div class="container-lg clearfix"><div class="col-12 footer"><span>&copy; 2021-2024
<a href=https://marcoscheel.de/>Marco Scheel</a>
| <a href=https://github.com/marcoscheel/marcoscheel.github.io>Source code</a>
| Powered by <a href=https://github.com/dsrkafuu/hugo-theme-fuji/ target=_blank>Fuji-v2</a> & <a href=https://gohugo.io/ target=_blank>Hugo</a></span></div></div></footer><script defer src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js></script><script defer src=/assets/js/fuji.min.js></script></body></html>